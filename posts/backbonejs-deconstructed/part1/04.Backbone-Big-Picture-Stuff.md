# 4 - Backbone Big Picture Stuff

## 4.1 - Backbone's Beginnings

Backbone was conjured up specifically to add structure to single page applications (to be exact, it was constructed during the creation of the [DocumentCloud](https://www.documentcloud.org/home) application) so as to avoid the repetitive DOM glue and mixing of data within the DOM that had historically been written to keep the UI in sync with the data. Backbone accomplishes this by providing a set of constructor functions which produce a model, collection, and view object, all for the purpose of organizing application data, logic, and presentation. These objects, once instantiated, have a very specific relationship to each other and are intended to keep your application modular, decoupled (communicating using an event system), and scalable.

## 4.2 - Backbone Provides Application Structure, as Well as Helpers for Building SPAs

In addition to the `Backbone.Model()`, `Backbone.Collection()`, and `Backbone.View()` constructor functions (i.e. the meat), Backbone additionally provides the following helpers for building SPAs and saving data with a RESTful JSON API:

- Router logic (i.e. `Backbone.Router`), so that specific functions can be invoked when the URL changes.
- Router history logic (i.e. `Backbone.History`), so that the correct route occurs when the user uses the browser back or forward button. Remember, this is a single page application; traditional URLs are not used.
- Syncing logic (i.e. `Backbone.Sync`), which aids in the reading and saving of data to the server.
- An Event (i.e. `Backbone.Event`) system that facilitates the
communication between models, views, and collections through the use of custom events and event listeners.
- A functional JavaScript library (i.e. Underscore.js or Lo-Dash.js).

These helper parts, just mentioned, should be understood before attempting to grok models, collections, and views. And, in fact, this is exactly what I have set out to accomplish in Part 1 of this article.

## 4.3 - Backbone Hard & Soft Dependencies

The only hard dependency identified by the Backbone documentation is the use of a functional programming utility library, either Underscore.js or Lo-Dash.js. Don’t get hung up here on which to choose, just choose one and use it, or Backbone literally won’t work. If you want to be told which to use, use Lo-Dash.js.

In addition to either Underscore.js or Lo-Dash.js, Backbone has soft dependencies on json2.js and your choice of [jQuery](http://jquery.com/), [Zepto](http://zeptojs.com/), or [Ender](http://ender.jit.su/) (really anything that mimics the jQuery API will work). If the soft dependency on a DOM library is not included or `window.JSON` is not provided by the browser the `Backbone.Router()`, `Backbone.View()`, `Backbone.History()`, and `Backbone.Sync()` won't function properly. That is, if you don’t include the soft dependencies, Backbone only offers partial use of models and collections. I suppose that might be helpful to someone, but it's my opinion that 99 percent of the time, the soft dependencies will be included along with Backbone.js (depending upon what browsers you need to support).

An example HTML file that details the Backbone dependencies might look something like this:

```html
<!DOCTYPE html>
<html lang="en">
<body>
<!-- functional programming utility library -->
<script src="http://cdnjs.cloudflare.com/ajax/libs/lodash.js/1.3.1/lodash.underscore.js"></script>
<!-- DOM & XHR utility -->
<script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/2.0.2/jquery.min.js"></script>
<!-- needed for older browsers without window.JSON -->
<script src="http://cdnjs.cloudflare.com/ajax/libs/json2/20121008/json2.js"></script>
<!-- Backbone.js -->
<script src="http://cdnjs.cloudflare.com/ajax/libs/backbone.js/1.0.0/backbone-min.js"></script>
</body>
</html>
```

It is common, if not required, that you use a dependency manager when building out a web application (e.g. [Require.js](http://requirejs.org/)). The HTML example file above is not a recommendation. Rather, it is being shown to clearly communicate the Backbone hard and soft dependencies. My opinion is that a dependency manager should be used when building a single page, thick client-side, web application.

4.4 - Backbone Runs on the Server Too

Backbone is useful anywhere you need to structure an application. This includes server-side applications, as well. The developers behind Backbone have crafted the library so that it can be [downloaded from NPM](https://npmjs.org/package/backbone) for Node.js server-side application development. However, its origins started in the client, and using it on the server will require some additional knowledge about running client-centric solutions from a JavaScript backend environment.

4.5 - `Backbone` is Just a Top-Level Namespace

The `Backbone` object that is exposed in the global scope is a namespace which contains Backbone code. Specifically, it contains the `Model()`, `View()`, `Collection()`, `History()`, and `Router()` constructor functions, as well as some supporting logic (i.e. `Events` and `sync()`) for these constructors. The code can be summarized like this:

```js
(function(){

    var root = this;

    Backbone.VERSION = '1.0.0';

    Backbone.Events = {//events functions to mixed into any object};
    Backbone.Model = function() {//model constructor};
    Backbone.Collection = function() {//collection constructor};
    Backbone.Router = function() {//router constructor};
    Backbone.History = function() {//history constructor};
    Backbone.sync = function() {//sync function};
    Backbone.View = function() {//view constructor};

}).call(this);
```